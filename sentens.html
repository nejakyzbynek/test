<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>JP ‚Äì Sentence Choice</title>

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha1/css/bootstrap.min.css">

  <style>
    body { background:#f5f5f5; }
    .sentence { font-size: 1.4rem; margin: 20px 0; }
    .choice { margin: 8px 0; }
    .correct { background:#198754 !important; color:white; }
    .wrong { background:#dc3545 !important; color:white; }
  </style>
</head>

<body>
    <nav class="navbar navbar-expand-md navbar-light bg-light">
            <div class="container-fluid">
                <a class="navbar-brand" href="/main.html">NIHONGO</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <a class="nav-link" aria-current="page" href="main.html">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="test.html">Learn</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="match.html">Match</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="sentens.html">Sentence</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>

<h1 class="text-center">Vyber spr√°vn√© slov√≠ƒçko üáØüáµ</h1>

<div class="text-center mb-3">
  Lekce:
  <select onchange="changeLesson(this.value)">
    <option value="lesson7_1">Lekce 7 ‚Äì I</option>
    <option value="lesson7_2">Lekce 7 ‚Äì II</option>
    <option value="lesson7_3">Lekce 7 ‚Äì III</option>
    <option value="lesson7_4">Lekce 7 ‚Äì IV</option>
  </select>
</div>

<div class="card p-3">
  <div id="sentence" class="sentence text-center"></div>
  <div id="choices"></div>

  <div class="text-center mt-3">
    <button id="nextBtn" class="btn btn-primary" style="display:none">
      Dal≈°√≠
    </button>
  </div>
</div>

<script>
/* ===== DATA ===== */
const lessons = {
  lesson7_1: [
    {jp: "kirimasu", sentence: "Pan o ___."},
    {jp: "okurimasu", sentence: "Tegami o ___."},
    {jp: "agemasu", sentence: "Tomodachi ni purezento o ___."},
    {jp: "moraimasu", sentence: "Sensei kara hon o ___."}
  ],
  lesson7_2: [
    {jp: "kashimasu", sentence: "Tomodachi ni hon o ___."},
    {jp: "karimasu", sentence: "Tomodachi kara pen o ___."},
    {jp: "oshiemasu", sentence: "Sensei ga nihongo o ___."},
    {jp: "naraimasu", sentence: "Watashi wa nihongo o ___."},
    {jp: "kakemasu", sentence: "Denwa o ___."}
  ],
  lesson7_3: [
    {jp: "te", sentence: "___ o araimasu."},
    {jp: "hashi", sentence: "___ de gohan o tabemasu."},
    {jp: "supuun", sentence: "___ de supu o nomimasu."},
    {jp: "naifu", sentence: "___ de niku o kirimasu."},
    {jp: "foku", sentence: "___ de pasta o tabemasu."},
    {jp: "hasami", sentence: "___ de kami o kirimasu."}
  ],
  lesson7_4: [
    {jp: "hana", sentence: "Kirei na ___ desu."},
    {jp: "shatsu", sentence: "Atarashii ___ o kaimasu."},
    {jp: "nimotsu", sentence: "___ ga omoi desu."},
    {jp: "okane", sentence: "___ ga arimasen."},
    {jp: "moo", sentence: "___ tabemashita."},
    {jp: "mada", sentence: "___ desu."},
    {jp: "kore kara", sentence: "___ benkyou shimasu."}
  ]
};

/* ===== STATE ===== */
let lessonKey = "lesson7_1";
let words = lessons[lessonKey];
let index = 0;

/* ===== ELEMENTS ===== */
const sentenceDiv = document.getElementById("sentence");
const choicesDiv = document.getElementById("choices");
const nextBtn = document.getElementById("nextBtn");

/* ===== FUNCTIONS ===== */
function changeLesson(key) {
  lessonKey = key;
  words = lessons[key];
  index = 0;
  showQuestion();
}

function shuffle(arr) {
  return arr.sort(() => Math.random() - 0.5);
}

function showQuestion() {
  const item = words[index];
  sentenceDiv.textContent = item.sentence;
  choicesDiv.innerHTML = "";
  nextBtn.style.display = "none";

  // vyber 2 ≈°patn√© + 1 spr√°vnou odpovƒõƒè
  const options = shuffle(
    [item.jp, ...shuffle(words.filter(w => w.jp !== item.jp))
      .slice(0, 2)
      .map(w => w.jp)]
  );

  options.forEach(word => {
    const btn = document.createElement("button");
    btn.className = "btn btn-outline-primary choice w-100";
    btn.textContent = word;
    btn.onclick = () => checkAnswer(btn, word, item.jp);
    choicesDiv.appendChild(btn);
  });
}

function checkAnswer(button, chosen, correct) {

  if (chosen === correct) {
    // spr√°vnƒõ
    button.classList.add("correct");
    document.querySelectorAll(".choice").forEach(b => b.disabled = true);
    nextBtn.style.display = "inline-block";

  } else {
    // ≈°patnƒõ ‚Üí restart stejn√© vƒõty
    button.classList.add("wrong");

    setTimeout(() => {
      showQuestion();   // znovu stejn√° vƒõta
    }, 800);
  }
}

nextBtn.onclick = () => {
  index++;
  if (index >= words.length) index = 0;
  showQuestion();
};

/* ===== START ===== */
showQuestion();
</script>

</body>
</html>
